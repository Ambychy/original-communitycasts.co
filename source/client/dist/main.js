angular.module("config",[]).constant("config",{serverHost:"http://localhost:8080/"});var app=angular.module("communityCasts",["ngMaterial","ui.router","config","smoothScroll","ngMessages"]).config(["$stateProvider","$urlRouterProvider","$locationProvider",function(t,e,o){o.html5Mode(!0),e.otherwise("/"),t.state("about",{url:"/about",templateUrl:"/app/views/_about.html",data:{pageTitle:"About Community Casts"}}),t.state("submit",{url:"/submit",templateUrl:"/app/views/_submit.html",controller:"submitController",data:{pageTitle:"Submit a screencast"}}),t.state("home",{url:"/:tagged?",templateUrl:"/app/views/_screencasts.html",controller:"screencastsController",params:{sort:"popular",tagged:""},data:{pageTitle:"Community Casts"}})}]).run(["$rootScope","$state","$stateParams",function(t,e,o){t.$state=e,t.$stateParams=o}]);app.controller("heroController",["$scope","$anchorScroll",function(t,e){"use strict";t.scrollToScreencasts=function(){e("container")}}]),app.controller("menuController",["$scope","$http","$location","config",function(t,e,o,s){"use strict";e.get(s.serverHost+"tags").success(function(e){t.tags=e.tags})}]),app.controller("screencastsController",["$scope","$http","$stateParams","$window","$location","config",function(t,e,o,s,n,r){"use strict";function a(){t.page=1,t.screencasts=[],t.hasMore=!0,t.loaded=!1,t.busy=!1}t.loadBtnText="Load More",t.fetchScreencasts=function(){t.busy=!0;var s=r.serverHost+"screencasts";""!==o.tagged&&(s+="/tagged/"+encodeURIComponent(o.tagged)+"/");var n=s+"?page="+t.page+"&sort="+t.sortOption;e.get(n).success(function(e){1===t.page&&(t.totalCount=e.totalCount),t.busy=!1,t.page+=1,t.hasMore=e.hasMore,t.screencasts=t.screencasts.concat(e.screencasts),t.loaded=!0,t.hasMore||(t.loadBtnText="Showing "+t.screencasts.length+" of "+t.screencasts.length+" screencasts. There are no more to load.")})},t.changeSortOption=function(){a(),t.fetchScreencasts()},t.navigateTo=function(t){s.open(t)},a(),t.sortOption=o.sort,t.tagged=o.tagged,t.fetchScreencasts()}]),app.controller("submitController",["$scope","$mdToast","$http","$state",function(t,e,o,s){"use strict";t.screencast={},t.submit=function(){o.post("/screencasts",t.screencast).then(function(){e.show(e.simple().content("Thank you for your submission. Your submission will be reviewed by the moderators and if it meets our guidelines, it'll appear on the home page soon!").position("top right").hideDelay(3e3)),s.go("home")})}}]),app.directive("tags",function(){"use strict";return{require:"ngModel",link:function(t,e,o,s){s.$parsers.push(function(t){var e=t.split(",");return e=e.filter(function(t){return/\S/.test(t)}),e=e.filter(function(t,e,o){return o.indexOf(t)===e}),s.$setValidity("tooManyTags",e.length<5),t})}}}),app.directive("youtubeUrl",function(){"use strict";return{require:"ngModel",link:function(t,e,o,s){s.$parsers.push(function(t){return s.$setValidity("youtubeUrl",/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/.test(t)),t})}}});