angular.module("config",[]).constant("config",{serverHost:"http://localhost:8080/"});var app=angular.module("communityCasts",["ngMaterial","ui.router","config","smoothScroll","ngMessages"]).config(["$stateProvider","$urlRouterProvider","$locationProvider",function(t,e,s){s.html5Mode(!0),e.otherwise("/"),t.state("about",{url:"/about",templateUrl:"/app/views/_about.html",data:{pageTitle:"About Community Casts"}}),t.state("submit",{url:"/submit",templateUrl:"/app/views/_submit.html",controller:"submitController",data:{pageTitle:"Submit a screencast"}}),t.state("home",{url:"/:tagged?",templateUrl:"/app/views/_screencasts.html",controller:"screencastsController",params:{sort:"popular",tagged:""},data:{pageTitle:"Community Casts"}})}]).run(["$rootScope","$state","$stateParams",function(t,e,s){t.$state=e,t.$stateParams=s}]);app.controller("heroController",["$scope","$anchorScroll",function(t,e){"use strict";t.scrollToScreencasts=function(){e("container")}}]),app.controller("menuController",["$scope","$http","$location","config",function(t,e,s,o){"use strict";e.get(o.serverHost+"tags").success(function(e){t.tags=e.tags})}]),app.controller("screencastsController",["$scope","$http","$stateParams","$window","$location","config",function(t,e,s,o,a,r){"use strict";function n(){t.page=1,t.screencasts=[],t.hasMore=!0,t.loaded=!1,t.busy=!1}t.loadBtnText="Load More",t.fetchScreencasts=function(){t.busy=!0;var o=r.serverHost+"screencasts";""!==s.tagged&&(o+="/tagged/"+encodeURIComponent(s.tagged)+"/");var a=o+"?page="+t.page+"&sort="+t.sortOption;e.get(a).success(function(e){1===t.page&&(t.totalCount=e.totalCount),t.busy=!1,t.page+=1,t.hasMore=e.hasMore,t.screencasts=t.screencasts.concat(e.screencasts),t.loaded=!0,t.hasMore||(t.loadBtnText="Showing "+t.screencasts.length+" of "+t.screencasts.length+" screencasts. There are no more to load.")})},t.changeSortOption=function(){n(),t.fetchScreencasts()},t.navigateTo=function(t){o.open(t)},n(),t.sortOption=s.sort,t.tagged=s.tagged,t.fetchScreencasts()}]),app.controller("submitController",["$scope","$http",function(t,e){"use strict";t.screencast={},t.screencast.tags=[],t.submit=function(){var s=t.screencast;s.tags=s.tags.join(),e.post("/screencasts",s).then(function(){alert("yay")})}}]),app.directive("youtubeUrl",function(){"use strict";return{require:"ngModel",link:function(t,e,s,o){o.$parsers.push(function(t){return o.$setValidity("youtubeUrl",/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/.test(t)),t})}}});